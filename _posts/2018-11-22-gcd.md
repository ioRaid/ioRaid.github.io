---
layout: post
title: GCD深入理解
categories: [oc]
tags: [oc]
description: GCD
---


<h3>dispatch_async和dispatch_sync的区别</h3>

{% highlight ruby %}

dispatch_sync：调用dispatch_sync的线程会等dispatch_sync的对内容执行完再继续执行

dispatch_async:调用 dispatch_async的线程不会等dispatch_async的内容执行，自己继续执行

区别：
调用dispatch的线程是否等待dispatch执行完
同步执行（sync）：只能在当前线程中执行任务，不具备开启新线程的能力
异步执行（async）：可以在新的线程中执行任务，具备开启新线程的能力

{% endhighlight %}




<h3>死锁</h3>

<h8>重要前提:以下代码在主线程中运行</h8>


{% highlight ruby %}

dispatch_sync(dispatch_get_main_queue (), ^{
      NSLog(@"dispatch_sync%@",[NSThread currentThread]);
});

1、sync函数会阻塞当前队列，等待block

2、dispatch_get_main_queue 为串行队列

3、block 被追加到当前queue的队尾等待被执行（当前为串行main_queue）

syn函数阻塞队列等待block执行返回，而block是被放入main_queue队尾，要等待main_queue执行完毕，而main_queue被syn函数阻塞。

{% endhighlight %}

<h3></h3>

{% highlight ruby %}


{% endhighlight %}

<a href="" target="_blank">参考</a>
